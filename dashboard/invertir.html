<!DOCTYPE html>
<html lang="es">
<head> 
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invertir – Vendraly</title>
  <link rel="stylesheet" href="../css/invertir.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div class="navbar">
      <div class="logo">Vendraly</div>
      <nav class="nav-links">
        <a href="oportunidades.html">Oportunidades</a>
        <a href="crearproyecto.html">Crear Proyecto</a>
        <a href="mensajes.html">Mensajes</a>
        <a href="portafolio.html">Portafolio</a>
        <a href="cuenta.html">Cuenta</a>
      </nav>
      <div class="nav-actions nav-links hidden" id="userPanel">
        <span id="userName"></span>
        <button class="btn btn-outline" onclick="logout()">Salir</button>
      </div>
    </div>
  </header>

  <main class="invertir-container">
    <section class="motivador">
      <h1>¡Haz parte de este cambio!</h1>
      <p>Estás a un paso de impulsar un proyecto real con impacto.</p>
    </section>

    <section class="resumen-inversion">
      <h2 id="titulo-proyecto">[Título del Proyecto]</h2>
      <p class="detalle"><strong>Categoría:</strong> <span id="categoria"></span></p>
      <p class="detalle"><strong>Tipo:</strong> <span id="tipo"></span></p>
      <p class="detalle"><strong>Retorno estimado:</strong> <span id="retorno"></span>%</p>
      <p class="detalle"><strong>Plazo:</strong> <span id="plazo"></span> meses</p>
    </section>

    <section class="formulario-inversion">
    <label for="monto">¿Cuánto deseas invertir?</label>
    <div class="campo-inversion">
        <input type="number" id="monto" placeholder="Ej: 500.00" min="1" />
    </div>

    <label>Método de pago:</label>
    <div class="radio-metodo">
        <label>
        <input type="radio" name="metodo" value="brl" checked />
        Saldo disponible (R$) <span class="info-saldo">— Saldo: R$800.00</span>
        </label>
        <label>
        <input type="radio" name="metodo" value="token" />
        Tokens Vendraly <span class="info-saldo">— Tokens: 1,250</span>
        </label>
        <label>
        <input type="radio" name="metodo" value="externo" />
        Pago externo (PIX o transferencia)
        </label>
    </div>

    <div id="externo-form" class="externo hidden">
        <label for="tipo-pago">Tipo de pago:</label>
        <select id="tipo-pago">
        <option value="pix">PIX</option>
        <option value="transferencia">Transferencia bancaria</option>
        </select>

        <label for="referencia">Referencia o comprobante:</label>
        <input type="text" id="referencia" placeholder="Ej: #ABC123 o 'Comprobante.jpg'" />
    </div>

    <button class="btn btn-primary">Confirmar Inversión</button>
    <p class="nota">Tu inversión se aplicará según el método seleccionado. Verifica antes de confirmar.</p>
    </section>

  </main>

  <footer>
    <div style="max-width:1200px;margin:0 auto;text-align:center;">
      <p>&copy; 2024 Vendraly. Todos los derechos reservados.</p>
    </div>
  </footer>

  <script src="../js/session.js"></script>
  <script src="../js/csrf.js"></script>
  <script src="../js/invertir.js"></script>
  <script>
    function abrirChatGrupo() {
      alert("Chat grupal no implementado aún");
    }
    function abrirChatPrivado() {
      alert("Chat privado no implementado aún");
    }

    // Si no hay sesión, redirige
    fetch('../php/verificar_sesion.php')
      .then(res => res.json())
      .then(data => {
        if (!data.logged_in) {
          window.location.href = '../index.html';
        }
      });
  </script>
</body>
</html>
